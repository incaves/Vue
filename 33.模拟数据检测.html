<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
     <script>
          let data = {
                name:"登高",
                address:"杜甫"
          }
          // 创建一个监视的实例对象,用于监视data中属性的变化
          const obs = new Observer(data)
          console.log(obs);
          // 准备一个vm实例对象
          let vm = {}
          vm._data = data = obs
          //  能够收到一个检测的实例对象
          function Observer(obj){
            // 1. 汇总对象中所有的属性形成一个数组
           const keys =  Object.keys(obj)
           //  2.遍历
           keys.forEach((k)=>{
                // this是 Observer的实例对象  
              Object.defineProperty(this,k,{
                 get(){
                   return obj[k]
                 },
                 set(val){
                   console.log(`${k}被改了,要去解析模版,生成虚拟DOM....`);
                   obj[k] = val
                 }
              })
           }) 
          }
     </script>
</body>
</html>